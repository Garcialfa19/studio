{
  "entities": {
    "Route": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Route",
      "type": "object",
      "description": "Represents a bus route with its details.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the route."
        },
        "nombre": {
          "type": "string",
          "description": "Name of the route (origin â€“ destination)."
        },
        "duracionMin": {
          "type": "number",
          "description": "Duration of the route in minutes."
        },
        "tarifaCRC": {
          "type": "number",
          "description": "Fare of the route in Costa Rican Colones."
        },
        "imagenHorarioUrl": {
          "type": "string",
          "description": "URL of the schedule image for the route.",
          "format": "uri"
        },
        "activo": {
          "type": "boolean",
          "description": "Indicates whether the route is currently active."
        },
        "lastUpdated": {
          "type": "string",
          "description": "Timestamp of the last update to this route.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "nombre",
        "duracionMin",
        "tarifaCRC",
        "imagenHorarioUrl",
        "activo"
      ]
    },
    "Alert": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Alert",
      "type": "object",
      "description": "Represents an alert message displayed to users.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the alert."
        },
        "titulo": {
          "type": "string",
          "description": "Title of the alert."
        },
        "mensaje": {
          "type": "string",
          "description": "Message content of the alert."
        },
        "severidad": {
          "type": "string",
          "description": "Severity level of the alert (info, warning, critical).",
          "format": "string"
        },
        "iniciaISO": {
          "type": "string",
          "description": "ISO timestamp when the alert becomes active.",
          "format": "date-time"
        },
        "terminaISO": {
          "type": "string",
          "description": "ISO timestamp when the alert expires.",
          "format": "date-time"
        },
        "activo": {
          "type": "boolean",
          "description": "Indicates whether the alert is currently active and displayed to users."
        },
        "lastUpdated": {
          "type": "string",
          "description": "Timestamp of the last update to this alert.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "titulo",
        "mensaje",
        "severidad",
        "iniciaISO",
        "terminaISO",
        "activo"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/routes/{routeId}",
        "definition": {
          "entityName": "Route",
          "schema": {
            "$ref": "#/backend/entities/Route"
          },
          "description": "Stores route information. Includes route details such as name, duration, fare, schedule image URL, and active status.",
          "params": [
            {
              "name": "routeId",
              "description": "Unique identifier for the route."
            }
          ]
        }
      },
      {
        "path": "/alerts/{alertId}",
        "definition": {
          "entityName": "Alert",
          "schema": {
            "$ref": "#/backend/entities/Alert"
          },
          "description": "Stores alert messages. Includes title, message, severity, start and end timestamps, and active status.",
          "params": [
            {
              "name": "alertId",
              "description": "Unique identifier for the alert."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to support the ASG Digital application's requirements for managing routes and alerts. The structure includes separate collections for `routes`, `alerts`, and `drivers`. Data is public-readable, but write access is restricted to authenticated users, who are assumed to be administrators. This segregation simplifies security rules, as each collection can be secured independently. Since all authenticated users are treated as admins, there's no need for a complex role-based access control system in the rules, which simplifies authorization logic."
  }
}
