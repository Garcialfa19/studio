/**
 * @file Firebase Security Rules for Firestore.
 *
 * Core Philosophy:
 * This ruleset implements a public read-only model for the `routes` and `alerts` collections.
 * There is no user-specific data, so authorization is based on global access rather than ownership or roles.
 * All writes are denied, effectively making the data read-only from the client-side.
 *
 * Data Structure:
 * - /routes/{routeId}: Stores route information.
 * - /alerts/{alertId}: Stores alert messages.
 *
 * Key Security Decisions:
 * - No user listing is allowed.
 * - Public read access is granted for all documents in both collections.
 * - All write operations (create, update, delete) are explicitly denied to prevent unauthorized data modification.
 *
 * Denormalization for Authorization: N/A (no authorization needed for reads).
 * Structural Segregation: Routes and alerts are stored in separate collections, each with its own read-only access policy.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows anyone to read route information, but denies all writes.
     * @path /routes/{routeId}
     * @allow (get, list) - Any user can read the route information.
     * @deny (create, update, delete) - No user can create, update, or delete routes.
     * @principle Public read-only access for route data.
     */
    match /routes/{routeId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows anyone to read alert messages, but denies all writes.
     * @path /alerts/{alertId}
     * @allow (get, list) - Any user can read the alert message.
     * @deny (create, update, delete) - No user can create, update, or delete alerts.
     * @principle Public read-only access for alert data.
     */
    match /alerts/{alertId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }
  }
}